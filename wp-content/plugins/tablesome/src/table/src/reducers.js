let self;class ReducersClass{constructor(e){self=this,self.hooks=e}getViewableRecords(e,t){return this.getPaginatedRecords(e,t.pagination)}getSfsRecords(e,t){let r=e;return r=this.getFilteredRecords(r,t.filters),r=this.getSearchedRecords(r,t.search,t.columns),r=this.getSortedRecords(r,t.sort),r}getPaginatedRecords(e,t){const r=t.currentPage*t.numOfRecordsPerPage,l=parseInt(r)+parseInt(t.numOfRecordsPerPage);return e.slice(r,l)}getFilteredRecords(e,t){let r=e;return t.forEach(((e,t)=>{e.column_id=e.filter_column_id,r=self.getFilteredRecordsFromSingleFilter(r,e)})),r}getSearchedRecords(e,t,r){return null==t||0==t.length?e:(t=t.toLowerCase(),e.filter((function(e){let l=!1;for(let o=0;o<e.content.length;o++){const n=e.content[o];let s=n.value,i=!1;const c=r[o].format;let a={isContentMatch:i,searchQuery:t,cell:n,cellType:c,column:r[o]};a=self.hooks.applyFilters("getSearchRecords",a),i=a.isContentMatch,"file"==c?i=parseInt(t)==parseInt(s)||i:i||(s="string"==typeof s?s.toLowerCase():"",i=s.toLowerCase().indexOf(t)>=0||i),i&&(l=!0)}return l})))}getSortedRecords(e,t){const r=t.order;return null==r||e.sort(((e,l)=>{let o={};if(-1==t.index){let r,n,s;"created_at"==t.field||"updated_at"==t.field?(r=new Date(e[t.field]).getTime()/1e3,n=new Date(l[t.field]).getTime()/1e3,s="number"):(r=e[t.field],n=l[t.field],s="text"),o={valueA:r,valueB:n,rowA:e[t.field],rowB:l[t.field],cellType:"text",sortType:s}}else o={valueA:"",valueB:"",rowA:e.content[t.index],rowB:l.content[t.index],cellType:t.column.format,sortType:"text"},o=self.hooks.applyFilters("getSortRecords",o);let n=o.valueA,s=o.valueB;return n===s?0:0==n.length?1:0==s.length?-1:"desc"==r?"number"==o.sortType?s-n:n<s?1:-1:"number"==o.sortType?n-s:n<s?-1:1})),e}getFilteredRecordsFromSingleFilter(e,t){return e.filter((function(e){let r=e.content[t.column_index].value;t.value;"textarea"==t.format&&(r=e.content[t.column_index].html,r=r.replace(/<[^>]+>/g,""));const l=null===r||""==r;if("empty"===t.operator.value)return l;if("not_empty"===t.operator.value)return!l;let o=!1,n={isContentMatch:o,filter:t,cell:e.content[t.column_index]};return n=self.hooks.applyFilters("getFilterRecords",n),o=n.isContentMatch,o}))}filterText(e,t,r){return t=t.toLowerCase(),r=r.toLowerCase(),"is"==e?t==r:"is_not"==e?t!=r:"contains"==e?t.includes(r):"does_not_contain"==e?!t.includes(r):"starts_with"==e?t.startsWith(r):"ends_with"==e?t.endsWith(r):"empty"==e||"not_empty"==e?t<=r:void 0}filterNumber(e,t,r){return"="==e?t==r:"!="==e?t!=r:">"==e?t>r:"<"==e?t<r:">="==e?t>=r:"<="==e?t<=r:void 0}}export default ReducersClass;